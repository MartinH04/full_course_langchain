# 2.3 输出解析器

语言模型的输出是文本。但开发的应用与真实的软件数据世界连接的时候，我们更希望得到的不仅仅是文本，而是更加结构化的信息。

结构化数据,如数组或JSON对象, 在软件开发中起着至关重要的作用, 它提高了数据处理的效率，便利了数据的存储和检索，支持了数据分析，并且有助于提高数据质量。

还有,大语言模型目前确实存在一些问题，例如机器幻觉，这是指模型在理解或生成文本时产生的错误或误解。另一个问题是为了显得“聪明”，模型有时候会加入不必要的冗长和华丽的语句，这可能会导致模型过度详细，显得话痨。

在真实的开发环境中，我们不仅希望获取模型的输出结果，而且还希望能够进行后处理，比如解析输出的结构化数据。

这就是为什么在大语言模型的开发中，结构化数据，如数组或JSON对象，显得尤为重要。他们可以帮助我们更好地理解和处理模型的输出结果，比如通过解析输出的JSON对象，我们可以得到模型的预测结果，而不仅仅是一个长长的文本字符串。我们也可以根据需要对这些结果进行进一步的处理，例如提取关键信息，进行数据分析等。这样，我们不仅可以得到模型的“直接回答”，而且可以根据自己的需求进行定制化的后处理，从而更好地利用大语言模型。

这就是输出解析器的用武之地。

输出解析器是帮助结构化语言模型响应的类。一个输出解析器主要需要实现两种方法：

"格式化"：这是一种返回字符串的方法，该字符串包含如何格式化语言模型输出的指示。
"解析"：这是一种接受字符串（假设为来自语言模型的响应）并将其解析为某种结构的方法。
然后还有一种可选的方法：

"解析"：这是一种接受字符串（语言模型的回答）和提示（假设为生成此类响应的提示）并将其解析为某种结构的方法。这个提示主要是为了在输出解析器想要重试或以某种方式修正输出，并需要提示中的信息来做到这一点时提供帮助。

本书中,我们选取最常用的列表和JSON格式的输出解析器,通过代码来解释输出解析器的必要性。Langchain 还提供了 `Datetime parser`, `Enum parser` , `Structured output parser`  等类型的输出解析器。 
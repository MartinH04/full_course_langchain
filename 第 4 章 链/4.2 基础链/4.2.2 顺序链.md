# 4.2.2 顺序链

另一种通用链是顺序链 (Sequential)，它基本上是多个链(Chain)的组合。您会发现，虽然链由单个工具组成，但它们也可以由其他链组成，这些链会连接在一起。工具链是许多神奇事情发生的地方。有各种不同的工具链，这里只是其中一部分，而且随着时间的推移，预计还会添加更多。

我们在上一节制作了一个提取新闻10个事实的LLMChain, 为了让你理解顺序链是如何工作的，我们先加一个新的链。

现在我们要做的是制作一个新的。然后我们将把其中一些内容链在一起，所以下一个我要做的也是一个LLMChain。

这将采用上一节的10个事实。但我们将把它们改写成投资者报告的形式，所以您可以在这里看到，我们将说好了，你是高盛的分析师，接受以下事实列表，并用它们为投资者撰写一个简短的段落，不要遗漏关键信息。我们也可以放一些东西在这里，也不要杜撰信息，但这是我们要传入的事实。

```
investor_update_prompt = PromptTemplate(
    input_variables=["facts"],
    template="You are a Goldman Sachs analyst. Take the following list of facts and use them to write a short paragrah for investors. Don't leave out key info:\n\n {facts}"
)
```

再次强调，这是一个LLMChain ，我们传入LLM，我们仍然使用上面定义的原始模型，我们传入提示模板。然后我们可以运行它。

```
investor_update_chain = LLMChain(llm=llm, prompt=investor_update_prompt)

investor_update = investor_update_chain.run(facts)

print(investor_update)
len(investor_update)
```

您可以看到，确实回来了。

```
Coinbase released its Q4 2022 earnings on Tuesday, revealing total revenue of $605 million and a GAAP loss of $557 million. Despite the losses, Coinbase's stock had risen 86% year-to-date before its Q4 earnings were released. Consumer trading volumes fell from $26 billion in Q3 2022 to $20 billion in Q4 2022, while institutional volumes fell from $133 billion to $125 billion. The overall crypto market capitalization fell about 64%, or $1.5 trillion during 2022. Trading revenue at Coinbase fell from $365.9 million in Q3 2022 to $322.1 million in Q4 2022, while its "subscription and services revenue" rose from $210.5 million in Q3 2022 to $282.8 million in Q4 2022. Despite the market downturn, monthly active developers in crypto have more than doubled since 2020 to over 20,000.
788
```

它写了一篇相当连贯的好文章。它比之前的要短得多。

### 加入顺序链

我们将使用简单的顺序链（SimpleSequentialChain）来完成这个过程。简单的顺序链就像PyTorch中的标准顺序模型一样，你只是从A到B到C，没有做任何复杂的操作。

我们还有这样的想法，一个链的输出将成为下一个链的输入。你可以看到，我们已经设置了完整的链，我们将拥有我们的提取事实链。而且我们将在这里拥有我们的投资摘要链。

现在当我取出原始文章并运行它时，它将完成这两个操作。你可以看到，现在它已经完成了事实提取。现在它已经完成了重写。然后它在这里完成了链的操作。这是我们将这些事物链在一起的一种方式，而不是必须重写代码来完成一件事，然后再去做另一件事等等。

```
from langchain.chains import SimpleSequentialChain, SequentialChain

full_chain = SimpleSequentialChain(chains=[fact_extraction_chain, investor_update_chain], verbose=True)
```

我们确实可以看到，如果我们取出我们得到的响应，我们得到了投资摘要链的结果，即使我们传入的是原始文章。

```
response = full_chain.run(article)
```

迄今为止，你将看到的最常见的变化是由一个大型语言模型组成的。还有一个提示模板，还有一堆其他很酷的链和工具在 Langchain 中。
# 4.1.1 链

在许多人第一次接触 LangChain 的时候，可能会因为其名字误以为它是区块链相关的内容。然而实际上，LangChain 的名字源自其框架的核心设计思路：用最简单的链条，将大预言模型开发的各个组件链接起来。这里的“链”，即我们在复杂系统设计中常说的“链式结构”。

或许你已经注意到了 LangChain 的 logo——一只鹦鹉和一节链条。鹦鹉学舌寓意着大预言模型像鹦鹉一样预测人类的下一段文本，而由无数节链组合起来的链条，象征着通过各种组件的有序连接，形成强大的应用力量。

如果没有链式结构，那么单独的语言大模型，虽然对于简单的应用可能已经足够，但是对于更复杂的应用，我们需要将多个模型或组件进行“链式”结构的连接和组合，这样才能创造出更强大、更具协同性的应用。

例如，我们可以创建一个链，该链接收用户输入，使用 PromptTemplate 格式化它，然后将格式化的响应传递给大模型。我们可以通过将多个链结合在一起，或者将链与其他组件结合在一起，来构建更复杂的链。

这种链式结构在创新应用中的价值已经得到了验证。最近，Johei Nakajima 在 Twitter 上分享了一篇名为《使用 GPT-4、Pinecone、LangChain 进行多样化应用的任务驱动自主代理》的论文，其中他介绍了最新的 Baby AGI。虽然 Baby AGI 现在还只是概念代码阶段，但是通过这个概念我们可以看出，链式结构是实现创新应用的非常有价值的工具。

下面是最简单的一个链的示例代码：

先安装库：
```
!pip -q install openai langchain
```
设置密钥：
```
import os
os.environ['OPENAI_API_KEY'] = ''
```

LLMChain 是最基本的构建块链。它接收一个提示模板，使用用户输入进行格式化，然后返回 LLM 的响应。

```
from langchain.llms import OpenAI
from langchain.prompts import PromptTemplate

llm = OpenAI(temperature=0.9)
prompt = PromptTemplate(
    input_variables=["product"],
    template="What is a good name for a company that makes {product}?",
)
```
要使用 LLMChain，首先创建一个提示模板。我们现在可以创建一个非常简单的链，它会接收用户输入，使用输入格式化提示，然后将其发送到 LLM。

```
from langchain.chains import LLMChain
chain = LLMChain(llm=llm, prompt=prompt)

# Run the chain only specifying the input variable.
print(chain.run("colorful socks"))
```

就如我们在模型输入输出所说, 如果有通用语言模型的方法，那么 Langchain 一定有聊天模型的方法。你也可以在 LLMChain 中使用聊天模型：

```
from langchain.chat_models import ChatOpenAI
from langchain.prompts.chat import (
    ChatPromptTemplate,
    HumanMessagePromptTemplate,
)
human_message_prompt = HumanMessagePromptTemplate(
        prompt=PromptTemplate(
            template="What is a good name for a company that makes {product}?",
            input_variables=["product"],
        )
    )
chat_prompt_template = ChatPromptTemplate.from_messages([human_message_prompt])
chat = ChatOpenAI(temperature=0.9)
chain = LLMChain(llm=chat, prompt=chat_prompt_template)
print(chain.run("colorful socks"))
```

